SYSCTL_RIS_PLLLRIS      EQU 0x40
SYSCTL_RCC_XTAL_M       EQU 0x7C0
SYSCTL_RCC_XTAL_6MHZ    EQU 0x2C0
SYSCTL_RCC_XTAL_8MHZ    EQU 0x380
SYSCTL_RCC_XTAL_16MHZ   EQU 0x540
SYSCTL_RCC2_USERCC2     EQU 0x80000000
SYSCTL_RCC2_DIV400      EQU 0x40000000
SYSCTL_RCC2_SYSDIV2_M   EQU 0x1F800000
SYSCTL_RCC2_SYSDIV2LSB  EQU 0x400000
SYSCTL_RCC2_PWRDN2      EQU 0x2000
SYSCTL_RCC2_BYPASS2     EQU 0x800
SYSCTL_RCC2_OSCSRC2_M   EQU 0x70
SYSCTL_RCC2_OSCSRC2_MO  EQU 0x0
BUS80MHZ                EQU 0x04C00000
SYSCTL_RCC              EQU 0x400FE060
SYSCTL_RCC2             EQU 0x400FE070
SYSCTL_RIS              EQU 0x400FE050
;***************************************************************
; Program section
;***************************************************************
;LABEL		DIRECTIVE	VALUE			COMMENT
					
			AREA 	routines, CODE, READONLY
			THUMB
			EXPORT CLK_Init
CLK_Init	PROC
			LDR R1, =SYSCTL_RCC2     
			LDR R0, [R1]
			ORR R0, R0, #SYSCTL_RCC2_USERCC2
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2     
			LDR R0, [R1]
			ORR R0, R0, #SYSCTL_RCC2_BYPASS2
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC     
			LDR R0, [R1]
			BIC R0, R0, #SYSCTL_RCC_XTAL_M
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC
			LDR R0, [R1]
			ORR R0, R0, #SYSCTL_RCC_XTAL_16MHZ
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			BIC R0, R0, #SYSCTL_RCC2_OSCSRC2_M
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			ORR R0, R0, #SYSCTL_RCC2_OSCSRC2_MO  
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			BIC R0, R0, #SYSCTL_RCC2_PWRDN2
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			ORR R0, R0, #SYSCTL_RCC2_DIV400      
			STR R0, [R1]

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			BIC R0, R0, #0x1FC00000
			ORR R0, R0, #BUS80MHZ    
			STR R0, [R1]

check_pll
			LDR R1, =SYSCTL_RIS
			LDR R0, [R1]
			ANDS R0, R0, #SYSCTL_RIS_PLLLRIS      
			BEQ  check_pll   

			LDR R1, =SYSCTL_RCC2
			LDR R0, [R1]
			BIC R0, R0, #SYSCTL_RCC2_BYPASS2
			STR R0, [R1]
			BX	LR
			ENDP
			ALIGN
			END